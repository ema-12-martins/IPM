{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { LoginStore } from \"../store/LoginStore.js\";\nexport default {\n  name: 'TableComponent',\n  props: {\n    msg: String\n  },\n  data() {\n    return {\n      lista_servicos: [],\n      tipo_da_data: \"\"\n    };\n  },\n  methods: {\n    irParaPaginaServico(servicoId) {\n      this.$router.push(\"/servico/\" + servicoId + \"/infServico\");\n    },\n    formataHoraDia(objeto_json) {\n      return objeto_json.dia.toString().padStart(2, '0') + '-' + objeto_json.mes.toString().padStart(2, '0') + '-' + objeto_json.ano.toString().padStart(4, '0') + '<br>' + objeto_json.hora.toString().padStart(2, '0') + ':' + objeto_json.minutos.toString().padStart(2, '0');\n    },\n    preencherListaServicos(link) {\n      fetch(link).then(response => {\n        if (response.ok) {\n          return response.json();\n        } else {\n          throw new Error('Something went wrong');\n        }\n      }).then(data => {\n        let self = this;\n        let lista = data;\n        lista.forEach(function (servico) {\n          fetch('http://localhost:3000/service-definitions?id=' + servico.definitionId).then(response => {\n            if (response.ok) {\n              return response.json();\n            } else {\n              throw new Error('Something went wrong');\n            }\n          }).then(data => {\n            if (Array.isArray(data)) {\n              data.sort((a, b) => {\n                return new Date(b.data.ano, b.data.mes - 1, b.data.dia, b.data.hora, b.data.minutos) - new Date(a.data.ano, a.data.mes - 1, a.data.dia, a.data.hora, a.data.minutos);\n              });\n              return data;\n            } else {\n              throw new Error('Data is not an array');\n            }\n          }).then(data2 => {\n            data2[0].data = servico.data;\n            data2[0].servicoId = servico.id;\n            self.lista_servicos.push(data2[0]);\n          }).catch(error => console.log(error));\n        });\n      }).catch(error => console.log(error));\n    },\n    preencherTabela() {\n      var listLink = this.$route.path.split('/');\n      if (listLink[1] === 'servicos' && listLink[2] === 'agendados') {\n        this.tipo_da_data = 'agendados';\n        this.preencherListaServicos('http://localhost:3000/services?estado=naoIniciado&agendamento=programado');\n      } else if (listLink[1] === 'servicos' && listLink[2] === 'fila') {\n        this.tipo_da_data = 'fila';\n        this.preencherListaServicos('http://localhost:3000/services?estado=naoIniciado&agendamento=filaDeEspera');\n      } else if (listLink[1] === 'servicos' && listLink[2] === 'suspensos') {\n        this.tipo_da_data = 'suspensos';\n        this.preencherListaServicos('http://localhost:3000/services?estado=parado');\n      } else if (listLink[1] === 'perfil' && listLink[2] === 'servRealizados') {\n        this.tipo_da_data = 'servRealizados';\n        let idMecanico = LoginStore().getIdUtilizador;\n        this.preencherListaServicos(\"http://localhost:3000/services?estado=realizado&mecanico=\" + idMecanico);\n      }\n    }\n  },\n  watch: {\n    // Observa mudanças na rota e chama verificarRota novamente\n    $route() {\n      this.lista_servicos = [];\n      this.preencherTabela();\n    }\n  },\n  mounted() {\n    // Esta função será chamada assim que o componente for montado\n    this.preencherTabela();\n  }\n};","map":{"version":3,"names":["LoginStore","name","props","msg","String","data","lista_servicos","tipo_da_data","methods","irParaPaginaServico","servicoId","$router","push","formataHoraDia","objeto_json","dia","toString","padStart","mes","ano","hora","minutos","preencherListaServicos","link","fetch","then","response","ok","json","Error","self","lista","forEach","servico","definitionId","Array","isArray","sort","a","b","Date","data2","id","catch","error","console","log","preencherTabela","listLink","$route","path","split","idMecanico","getIdUtilizador","watch","mounted"],"sources":["/home/emamartins12/GIT/IPM/ProjetoFinal/src/components/Table.vue"],"sourcesContent":["<template>\n    <table class=\"main-table\">\n        <thead>\n            <tr>\n                <th class=\"header-cell\">\n                    Identificação\n                </th>                     \n                <th class=\"header-cell\">\n                    Serviço\n                </th>\n                <th class=\"header-cell\">\n                    Duração\n                </th>\n                <th v-if=\"this.tipo_da_data === 'agendados'\" class=\"header-cell\">\n                    Data Entrega\n                </th>\n                <th v-if=\"this.tipo_da_data === 'fila'\" class=\"header-cell\">\n                    Data Entrada\n                </th>\n                <th v-if=\"this.tipo_da_data === 'suspensos'\" class=\"header-cell\">\n                    Data Entrada\n                </th>\n                <th v-if=\"this.tipo_da_data === 'servRealizados'\" class=\"header-cell\">\n                    Data e hora (fim)\n                </th>\n            </tr>\n        </thead>\n        <tbody class=\"cell-scroll\">\n            <tr v-for=\"servico in lista_servicos\" :key=\"servico.id\"> <!--Para so ter 1 identificador por celula-->\n              <td class=\"cell-button\" @click=\"irParaPaginaServico(servico.servicoId)\">{{ servico.servicoId }} </td>\n              <td class=\"cell\">{{ servico.descr}}</td>\n              <td class=\"cell\">{{ servico.duração}}min</td>\n              <td class=\"cell\" v-html=\"formataHoraDia(servico.data)\"></td>\n            </tr>\n        </tbody>\n    </table>\n</template>\n\n\n<script>\nimport { LoginStore } from \"../store/LoginStore.js\";\n\nexport default {\n    name: 'TableComponent',\n    props: {\n        msg: String\n    },\n    data() {\n        return {\n            lista_servicos:[],\n            tipo_da_data:\"\"\n        }\n    },\n    methods: {\n        irParaPaginaServico(servicoId){\n            this.$router.push(\"/servico/\"+servicoId+\"/infServico\");\n        },\n        formataHoraDia(objeto_json){\n            return objeto_json.dia.toString().padStart(2, '0')+'-'+objeto_json.mes.toString().padStart(2, '0')+'-'+objeto_json.ano.toString().padStart(4, '0')+'<br>'\n            +objeto_json.hora.toString().padStart(2, '0')+':'+objeto_json.minutos.toString().padStart(2, '0')\n\n        },\n        preencherListaServicos(link){\n            fetch(link)\n                .then(response => {\n                if (response.ok) {\n                    return response.json();\n                } else {\n                    throw new Error('Something went wrong');\n                }\n                })\n                .then(data => {\n                    let self = this;\n                    let lista=data\n                    lista.forEach(function(servico) {\n                        fetch('http://localhost:3000/service-definitions?id='+servico.definitionId)\n                        .then(response => {\n                            if (response.ok) {\n                                return response.json();\n                            } else {\n                                throw new Error('Something went wrong');\n                            }\n                        })\n                        .then(data => {\n                            if (Array.isArray(data)) {\n                                data.sort((a, b) => {\n                                    return new Date(b.data.ano, b.data.mes - 1, b.data.dia, b.data.hora, b.data.minutos) - new Date(a.data.ano, a.data.mes - 1, a.data.dia, a.data.hora, a.data.minutos);\n                                });\n                                return data;\n                            } else {\n                                throw new Error('Data is not an array');\n                            }\n                        })\n                        .then(data2 => {\n                            data2[0].data = servico.data\n                            data2[0].servicoId = servico.id\n                            self.lista_servicos.push(data2[0])\n                        })\n                        .catch(error => console.log(error));\n                        \n                    });\n                })\n                .catch(error => console.log(error));\n\n        },\n\n        preencherTabela() { \n            var listLink = this.$route.path.split('/')\n            if (listLink[1] === 'servicos' && listLink[2] === 'agendados'){\n                this.tipo_da_data='agendados'\n                this.preencherListaServicos('http://localhost:3000/services?estado=naoIniciado&agendamento=programado')\n            }else if(listLink[1] === 'servicos' && listLink[2] === 'fila'){\n                this.tipo_da_data='fila'\n                this.preencherListaServicos('http://localhost:3000/services?estado=naoIniciado&agendamento=filaDeEspera')\n            }else if(listLink[1] === 'servicos' && listLink[2] === 'suspensos'){\n                this.tipo_da_data='suspensos'\n                this.preencherListaServicos('http://localhost:3000/services?estado=parado')\n            }else if(listLink[1] === 'perfil' && listLink[2] === 'servRealizados'){\n                this.tipo_da_data='servRealizados'\n                let idMecanico = LoginStore().getIdUtilizador\n                this.preencherListaServicos(\"http://localhost:3000/services?estado=realizado&mecanico=\"+idMecanico)\n            }\n           \n        }\n    },\n    watch: {\n        // Observa mudanças na rota e chama verificarRota novamente\n        $route() {\n            this.lista_servicos = []\n            this.preencherTabela()\n        }\n    },\n    mounted(){\n        // Esta função será chamada assim que o componente for montado\n        this.preencherTabela();\n    }\n}\n</script>   \n\n<style scoped>\n.main-table{\n    display: block;\n    width: 60rem;\n}\n\n.header-cell {    \n    background-color: #E5E5E5;\n    position: relative;\n    border: 0.1rem solid #828282;\n    justify-content: center;\n    width: 15rem;\n    height: 5rem;\n    box-sizing: border-box;\n    word-wrap: break-word;\n    font-family: 'Inter';\n    font-size: 1.5rem;\n    line-height: 1;\n    color: #000000;\n}\n\n.cell-scroll{\n    max-height: calc(6 * (5.15rem)); \n    overflow-y: auto; \n    display: block;\n}\n\n.cell {    \n    position: relative;\n    border: 0.1rem solid #828282;\n    width: 15rem;\n    height: 5rem;\n    justify-content: center;\n    text-align: center;\n    box-sizing: border-box;\n    word-wrap: break-word;\n    font-family: 'Inter';\n    font-size: 1.25rem;\n    line-height: 1;\n    color: #000000;\n}\n\n.cell-button {    \n    position: relative;\n    border: 0.1rem solid #828282;\n    width: 15rem;\n    height: 5rem;\n    justify-content: center;\n    text-align: center;\n    box-sizing: border-box;\n    word-wrap: break-word;\n    font-family: 'Inter';\n    font-size: 1.25rem;\n    line-height: 1;\n    color: #000000;\n    cursor: pointer;\n}\n</style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}